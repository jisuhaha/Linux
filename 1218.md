
# DNS Server


### DNS 정의
1980년대 초 ARPANET hosts.txt file
in Linux : /etc/hosts
in Windows : C:\Windows\System32\drivers\etc\hosts

	127.0.0.1   localhost localhost.localdomain localhost4 			localhost4.localdomain4
	::1         localhost localhost.localdomain localhost6 localhost6.localdomain6
	192.168.10.5    server.world.com        server
	192.168.10.6    client.world.com        client
	...
	/etc/hosts

새컴퓨터의 변경사항들을 수동을 관리해야했음 관리의 한계로 인해 생긴것이 DNS
최초의 DNS서버 프로그램 Berkeley Internet Name DomainServer( BIND ) 1983

DNS의 역할을 문자를 ip주소로 변환

### DNS 구조
!~@#$

### DNS 작동원리
DNS Service port 53, protocol tcp /udp 

	NameServer가 tcp를 사용하는 2가지이유
	udp상 최대 전송가능한 데이터크기가 512 byte 초과시 tcp 사용
	마스터와 슬레이브서버간 도메인 존 전송이 tcp를 통해 이루어짐
	
/etc/host.conf에 multi on을 사용하면 호스트에 대한 정보를 수동 으로 기록하는 파일 /etc/hosts 에 여러 호스트에 대한 정보 기록을 허용한다는 의미

	cat /etc/host.conf
	multi on

/etc/nsswitch.conf에서 찾고자 하는 호스트 정보를 먼저 files (/etc/hosts)에서 찾고 그 다음에 dns 그리고 마지막으로 localhost를 IP 127.0.0.1 처럼 hostname을 변환하기 위해 사용되는 myhostname에서 찾는다는 순서를 지정 가능
	[root@server conf]# cat /etc/nsswitch.conf |grep hosts
	#     hosts: files dns
	#     hosts: files dns  # from user file
	# Valid databases are: aliases, ethers, group, gshadow, hosts,
	**hosts:      files dns myhostname**
	
database file create

	[root@server named]# vi /var/named/example.zone
	$TTL 1D  >> TTL(TimeToLive) : 접근자가 캐시에 저장할 기간 해당소스에선 1일
	@       IN SOA ns.example.com.  admin.example.com. (
											2023121801 ; serial
											1D      ; refresh
											1H      ; retry
											1W      ; expire
											3H )    ; minimum
	>> @ : zoneName(vi /etc/named.rfc1912.zones에 지정한 ZoneName), IN : Internet, SOA(Start of Authority) : Server Name, admin.example.com : 관리자 이메일 Zone네임과 혼동으 피하기 위해 @대신 .사용 serial : 존정보가 업데이트 되었는지 슬레이브 네임서버에 전달하기 위해 사용하는 숫자 "YYYYMMDDNN"형식 사용  
			NS      ns.example.com.
			MX 10   ms.example.com.
			IN      A       192.168.10.5
	ns      IN      A       192.168.10.5
	ms      IN      A       192.168.10.5
	www     IN      A       192.168.10.5
	ftp     IN      A       192.168.10.5
	web     IN      CNAME www
<!--stackedit_data:
eyJoaXN0b3J5IjpbMTA5MDY2MDY3MCw2Nzc4NzA3OTAsNjYxNj
M2OTc3LDE2Mjg3NjMzNDMsLTExMTUwNDE1MDMsLTQyOTM1OTA1
NF19
-->