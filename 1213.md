---


---

<hr>
<hr>
<h2 id="section">20231213</h2>
<h3 id="authorizedkeys">AuthorizedKeys</h3>
<p>실습 복습 ssh 인증키의 생성 및 테스트</p>
<pre><code>실 인증에 사용하는것은 개인키
기본 homeDirectory/.ssh/id_rsa
다른 개인키를 통한 인증을 사용하는 경우
ssh -i {privateKey} {userID}@{host}
연결관련 설정파일 /etc/ssh/ssh_config
</code></pre>
<p>
sshd_config 파일중 기본 보안 설정</p>
<pre><code>Port : ssh 포트
Protocol : version 관련 보안상 protocol1은 사용하지않고 2를 사용 (둘다 사용하기 위해서는 Protocol 2,1)
ListenAddress : 여러개의 IP를 사용중인 경우 특정 IP로 SSH접속이 가능하도록 설정 (0.0.0.0인 경우 모든 네트워크 허용)
KeyRegenerationlnterval : 자동으로 생성된 키의 유효시간 지정(기본 3600sec) 호스트의 세션에 있는 키를 캡쳐해서 암호를 해독하거나 훔친 키를 재사용하지 못하도록 하기 위함
ServerKeyBits : 서버키의 비트길이 설정(최소 512, 기본 768)
PermitRootLogin : 루트로그인 허용유무
PermitEmptyPasswords : 패스워드 없이 로그인하는 사용자의 접속 허용유무
HostbasedAuthentication : 호스트 기반의 인증방법 허용유무
PasswordAuthentication : 비밀번호 인증 사용
MaxAuthTries : 로그인 시도가능 횟수 
AuthorizedKeysFile : 기본 키파일 (default : .ssh/authorized_keys)
PubkeyAuthentication : 공개키 사용유무(default : yes)
AllowUsers : 허용 사용자만 SSH접속 허용
AllowGroups  : 허용 그룹만 SSH접속 혀용
</code></pre>
<p><a href="https://www.ezeelogin.com/kb/article/how-to-upgrade-openssh-in-centos-331.html">How to upgrade OpenSSH in Centos</a></p>
<pre><code>yum updatee openssh-sre penhpessh-ciets
   yum group install 'Development Tools' -y
yum install zlib-devel openssl-devel -y
wget -c https://cdn.openbsd.org/pub/OpenBSD/OpenSSH/portable/openssh-9.0o1.tar.gz
tar xvzf openssh-9.0p1.tar.gz
cd openssh
yum install pam-devel libselinux-devel -y
mkdir /var/lib/sshd
chmod -R 700 /var/lib/sshd/
chown -R root:sys /var/lib/sshd/
useradd -r -U -d /var/lib/sshd/ -c "sshd privsep" -s /bin/false sshd
yum remove openssh-server openssh openssh-clients -y
./configure --with-pam --with-selinux --with-privsep-path=/var/lib/sshd/ --sysconfdir=/etc/ssh
make &amp;&amp; make install
</code></pre>

# File System 관리
### mount
mount: device(disk, storage) -> directory mapping
fdisk -l
swap : memory 용도 harddisk 일정공간을 메모리로 사용 (Unix 개발당시 memory가격이 비쌌음)
lsblk: 명령은 장치의 전체 경로, UUID 및 마운트 지점, 파티션의 파일 시스템 유형을 표시합니다. 파일 시스템이 마운트되지 않은 경우 마운트 지점은 비어 있습니다.
### Partition
fdisk {deviceID}
primary, extend, logical 3개의 영역
> Primary Partition : 주 영역 파티션
: Maximum 4개까지 생성 가능 ( 사용하는 용도에 맞게 사용하지 않거나 1개~4개 까지 조절해서 사용)
>
>Extend Partition :   확장 영역 파티션
: Maximum 1개까지 생성 가능 ( 최대가 1개이기 때문에 사용하지 않거나 1개까지 조절해서 사용합니다.)
>
>Ligical Partition :  논리 영역 파티션
Extend Patition 안에 만들 수 있는 파티션으로 SCSI 한 개의 총 파티션 15개만 넘지 않는 범위에서 자유롭게 만들어서 사용가능. 그러나 12개 이상의 파티션을 만드는 것은 시스템에 좋지 않다고 하니 적절하게분배해서 필요
참조 : <a href="https://wlsvud84.tistory.com/14">리눅스 파티션 설정</a>

>Fdisk

      help:
      DOS (MBR)
       a   toggle a bootable flag
       b   edit nested BSD disklabel
       c   toggle the dos compatibility flag
    
      Generic
       d   delete a partition
       F   list free unpartitioned space
       l   list known partition types
       n   add a new partition
       p   print the partition table
       t   change a partition type
       v   verify the partition table
       i   print information about a partition
    
      Misc
       m   print this menu
       u   change display/entry units
       x   extra functionality (experts only)
    
      Script
       I   load disk layout from sfdisk script file
       O   dump disk layout to sfdisk script file
    
      Save & Exit
       w   write table to disk and exit
       q   quit without saving changes
    
      Create a new label
       g   create a new empty GPT partition table
       G   create a new empty SGI (IRIX) partition table
       o   create a new empty DOS partition table
       s   create a new empty Sun partition table


mkfs(makefilesystem) 명령어를 통해 디스크 포맷
<!--stackedit_data:
eyJoaXN0b3J5IjpbLTU0NTQzOTE4NCwyNzYzNjgzNTgsMjA2Mz
I1NzYwNSwxODU4MDIyODE2LC0xOTc2Mzg1NDEsOTI5MjQ3MDA5
LDIwOTkwOTY2NTMsLTIzMzQ2MTkwNCwtOTMwMjY2NDgxLDE5MT
AzMjkxNDYsLTUxNzAzMzU5MywtMTY5NzIzNTc5MCw0OTE3NzIy
ODddfQ==
-->